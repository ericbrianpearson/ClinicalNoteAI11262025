# Health Scribe AI - Environment Configuration Template
# Copy this file to `.env` and fill in your actual values
# NEVER commit .env to version control!

# =============================================================================
# REQUIRED - Application will not start without these
# =============================================================================

# Database Connection (Neon PostgreSQL)
# Get from: Replit Secrets or Neon dashboard
DATABASE_URL="postgresql://user:password@host/database?sslmode=require"

# JWT Secret for Token Signing
# CRITICAL: Use a strong, random secret (32+ characters)
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-me-in-production"

# Node Environment
# Values: "development" | "production"
NODE_ENV="production"

# =============================================================================
# AZURE COGNITIVE SERVICES (Required for Production)
# =============================================================================

# Azure Speech-to-Text Service
# Get from: Azure Portal > Cognitive Services > Speech
# Alternative names: SPEECH_KEY, AZURE_SPEECH_KEY
AZURE_SPEECH_KEY="your-azure-speech-api-key"
AZURE_SPEECH_REGION="eastus"

# Azure Text Analytics Service
# Get from: Azure Portal > Cognitive Services > Language
AZURE_TEXT_ANALYTICS_KEY="your-azure-text-analytics-key"
AZURE_TEXT_ANALYTICS_ENDPOINT="https://your-resource.cognitiveservices.azure.com/"

# =============================================================================
# STRIPE PAYMENT PROCESSING (Optional - for subscription billing)
# =============================================================================

# Stripe API Keys
# Get from: Stripe Dashboard > Developers > API Keys
# Use test keys for development, live keys for production
STRIPE_SECRET_KEY="sk_test_..." # or sk_live_... for production
STRIPE_WEBHOOK_SECRET="whsec_..."

# Stripe Price IDs (Create in Stripe Dashboard > Products)
STRIPE_PRICE_BASIC="price_..."  # Basic plan monthly price ID
STRIPE_PRICE_PRO="price_..."    # Pro plan monthly price ID

# =============================================================================
# ANTHROPIC CLAUDE (Optional - Enhanced AI Insights)
# =============================================================================

# Anthropic API Key
# Get from: https://console.anthropic.com/
# Used for advanced clinical reasoning and documentation generation
ANTHROPIC_API_KEY="sk-ant-..."

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Frontend URL (for CORS)
# Default: Auto-detected from Replit domains
FRONTEND_URL="https://your-app.replit.app"

# API Rate Limiting (requests per IP per 15 minutes)
# Default: 100 in production, unlimited in development
RATE_LIMIT_MAX=100

# Session/Token Expiry (in hours)
# Default: 24 hours for practitioners, 168 hours (7 days) for patients
JWT_EXPIRY_HOURS=24

# Log Level
# Values: "error" | "warn" | "info" | "debug"
LOG_LEVEL="info"

# =============================================================================
# DATABASE CONNECTION (Managed by Replit - DO NOT MODIFY)
# =============================================================================

# These are auto-populated by Replit PostgreSQL
# DO NOT manually set these - they override DATABASE_URL
PGHOST="automatically-set-by-replit"
PGPORT="automatically-set-by-replit"
PGUSER="automatically-set-by-replit"
PGPASSWORD="automatically-set-by-replit"
PGDATABASE="automatically-set-by-replit"

# =============================================================================
# REPLIT ENVIRONMENT (Auto-populated - DO NOT MODIFY)
# =============================================================================

# Replit-specific variables (automatically set)
REPLIT_DOMAINS="your-app.replit.app"
REPL_ID="your-repl-id"
REPL_OWNER="your-username"
REPL_SLUG="your-repl-name"

# =============================================================================
# CONFIGURATION NOTES
# =============================================================================

# DEMO MODE:
# If AZURE_SPEECH_KEY is not set or NODE_ENV=development, the system runs
# in demo mode with realistic simulated transcriptions. This is useful for
# development and testing but should NOT be used in production.

# PRODUCTION CHECKLIST:
# Before deploying to production, ensure:
# 1. ✅ JWT_SECRET is strong and random (32+ characters)
# 2. ✅ NODE_ENV is set to "production"
# 3. ✅ AZURE_SPEECH_KEY and AZURE_SPEECH_REGION are configured
# 4. ✅ DATABASE_URL points to production database
# 5. ✅ STRIPE keys are live (sk_live_...) not test (sk_test_...)
# 6. ✅ All secrets are stored in Replit Secrets (not .env file)
# 7. ✅ BAA established with Replit for HIPAA compliance
# 8. ✅ Privacy policy and terms of service published

# SECURITY WARNINGS:
# - NEVER commit .env or secrets to Git
# - Use Replit Secrets for production values
# - Rotate JWT_SECRET every 90 days
# - Monitor API keys for unauthorized usage
# - Revoke and regenerate keys if compromised

# FEATURE FLAGS (Optional - for future use):
# ENABLE_REAL_TIME_TRANSCRIPTION=false
# ENABLE_CLINICAL_INSIGHTS=true
# ENABLE_EM_CODING=true
# ENABLE_PATIENT_PORTAL=true
# ENABLE_STRIPE_BILLING=false

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Development Configuration:
# - NODE_ENV=development
# - No Azure keys (demo mode)
# - Stripe test keys
# - Verbose logging

# Production Configuration:
# - NODE_ENV=production
# - Real Azure keys
# - Stripe live keys
# - Error-level logging only
# - Strong JWT_SECRET

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# Issue: "Cannot connect to database"
# Solution: Check DATABASE_URL format and network access

# Issue: "Azure Speech error"
# Solution: Verify AZURE_SPEECH_KEY and AZURE_SPEECH_REGION are correct

# Issue: "JWT verification failed"
# Solution: Ensure JWT_SECRET matches between restarts

# Issue: "Stripe webhook signature invalid"
# Solution: Check STRIPE_WEBHOOK_SECRET matches webhook endpoint

# =============================================================================
# SUPPORT
# =============================================================================

# Documentation: See README.md, ARCHITECTURE.md, SECURITY.md
# Security: See SECURITY.md, HIPAA_READINESS.md
# Audit Reports: See ARTIFACTS/*.md

# For issues, contact your system administrator or refer to:
# - Replit: https://replit.com/support
# - Azure: https://portal.azure.com
# - Stripe: https://dashboard.stripe.com/support
